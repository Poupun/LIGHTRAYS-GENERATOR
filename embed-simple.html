<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Light Rays Embed - Simple Version</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
            color-scheme: normal;
        }

        #light-rays-embed {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .ambient-glow {
            position: absolute;
            top: 0;
            right: 0;
            width: 200%;
            height: 200%;
            background: radial-gradient(
                ellipse at 100% 0%,
                rgba(0, 255, 127, 0.3) 0%,
                rgba(0, 255, 127, 0.1) 30%,
                transparent 60%
            );
            animation: glow-pulse 4s ease-in-out infinite alternate;
        }

        .ray {
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            height: 100vh;
            background: linear-gradient(
                to bottom,
                rgba(0, 255, 127, 0.8) 0%,
                rgba(0, 255, 127, 0.4) 30%,
                rgba(0, 255, 127, 0.2) 60%,
                transparent 100%
            );
            transform-origin: 100% 0%;
            filter: blur(2px);
            animation: ray-shimmer 3s ease-in-out infinite alternate;
        }

        .ray:nth-child(2) {
            transform: rotate(15deg);
            width: 60px;
            animation-delay: 0.5s;
        }

        .ray:nth-child(3) {
            transform: rotate(-15deg);
            width: 70px;
            animation-delay: 1s;
        }

        .ray:nth-child(4) {
            transform: rotate(30deg);
            width: 50px;
            animation-delay: 1.5s;
        }

        .ray:nth-child(5) {
            transform: rotate(-30deg);
            width: 90px;
            animation-delay: 2s;
        }

        @keyframes ray-shimmer {
            0% { 
                opacity: 0.3;
                transform: rotate(var(--angle, 0deg)) scaleY(0.9);
            }
            100% { 
                opacity: 0.8;
                transform: rotate(var(--angle, 0deg)) scaleY(1.1);
            }
        }

        @keyframes glow-pulse {
            0% { opacity: 0.4; }
            100% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <div id="light-rays-embed">
        <div class="ambient-glow"></div>
        <div class="ray" style="--angle: 0deg;"></div>
        <div class="ray" style="--angle: 15deg;"></div>
        <div class="ray" style="--angle: -15deg;"></div>
        <div class="ray" style="--angle: 30deg;"></div>
        <div class="ray" style="--angle: -30deg;"></div>
    </div>

    <script>
        console.log('üöÄ Simple embed loaded successfully');
        
        // Parse URL config if provided
        const urlParams = new URLSearchParams(window.location.search);
        const configParam = urlParams.get('config');
        
        if (configParam) {
            try {
                const config = JSON.parse(atob(configParam));
                console.log('üìã Config received:', config);
                
                // Apply color if provided
                if (config.color) {
                    const rays = document.querySelectorAll('.ray');
                    const glow = document.querySelector('.ambient-glow');
                    
                    const colorValue = config.color;
                    const rgb = hexToRgb(colorValue);
                    
                    if (rgb) {
                        rays.forEach(ray => {
                            ray.style.background = `linear-gradient(
                                to bottom,
                                rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.8) 0%,
                                rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.4) 30%,
                                rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.2) 60%,
                                transparent 100%
                            )`;
                        });
                        
                        glow.style.background = `radial-gradient(
                            ellipse at 100% 0%,
                            rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.3) 0%,
                            rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.1) 30%,
                            transparent 60%
                        )`;
                    }
                }
                
                console.log('‚úÖ Configuration applied successfully');
            } catch (error) {
                console.warn('‚ö†Ô∏è Failed to parse config, using defaults:', error);
            }
        }
        
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }
        
        // Let parent know we loaded
        if (window.parent !== window) {
            window.parent.postMessage({
                type: 'LIGHT_RAYS_LOADED',
                success: true
            }, '*');
        }
    </script>
</body>
</html>
